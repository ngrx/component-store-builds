/**
 * @license NgRx 9.2.0+1.sha-47e7ba3
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tslib"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/component-store",["exports","tslib","rxjs","rxjs/operators"],e):e(((t=t||self).ngrx=t.ngrx||{},t.ngrx.componentStore={}),t.tslib,t.rxjs,t.rxjs.operators)}(this,(function(t,e,n,r){"use strict";
/**
     * @license MIT License
     *
     * Copyright (c) 2017-2020 Nicholas Jamieson and contributors
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice and this permission notice shall be included in all
     * copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
     * SOFTWARE.
     */function i(){return function(t){return new n.Observable((function(e){var r,i,o=new n.Subscription;return o.add(t.subscribe({complete:function(){r&&e.next(i),e.complete()},error:function(t){return e.error(t)},next:function(t){i=t,r||(r=n.asapScheduler.schedule((function(){e.next(i),r=void 0})),o.add(r))}})),o}))}}var o=function(){function t(t){this.destroySubject$=new n.ReplaySubject(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new n.ReplaySubject(1),this.isInitialized=!1,this.state$=this.select((function(t){return t})),t&&this.initState(t)}return t.prototype.ngOnDestroy=function(){this.stateSubject$.complete(),this.destroySubject$.next()},t.prototype.updater=function(t){var i=this;return function(o){var s,u=(n.isObservable(o)?o:n.of(o)).pipe(r.concatMap((function(t){return i.isInitialized?n.of(t).pipe(r.withLatestFrom(i.stateSubject$)):n.throwError(Error(i.constructor.name+" has not been initialized"))})),r.takeUntil(i.destroy$)).subscribe({next:function(n){var r=e.__read(n,2);i.stateSubject$.next(t(r[1],r[0]))},error:function(t){s=t,i.stateSubject$.error(t)}});if(s)throw s;return u}},t.prototype.initState=function(t){this.isInitialized=!0,this.stateSubject$.next(t)},t.prototype.setState=function(t){"function"!=typeof t?this.initState(t):this.updater(t)()},t.prototype.select=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var s=t.pop(),u=(0===t.length?this.stateSubject$.pipe(r.map(s)):n.combineLatest(t).pipe(i(),r.map((function(t){return s.apply(void 0,e.__spread(t))})))).pipe(r.distinctUntilChanged(),r.shareReplay({refCount:!0,bufferSize:1}),r.takeUntil(this.destroy$));return u},t}();t.ComponentStore=o,Object.defineProperty(t,"__esModule",{value:!0})}));