/**
 * @license NgRx 9.1.2+9.sha-0775093
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tslib"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/component-store",["exports","tslib","rxjs","rxjs/operators"],e):e(((t=t||self).ngrx=t.ngrx||{},t.ngrx.componentStore={}),t.tslib,t.rxjs,t.rxjs.operators)}(this,(function(t,e,r,i){"use strict";var n=function(){function t(t){this.stateSubject$=new r.ReplaySubject(1),this.isInitialized=!1,this.state$=this.stateSubject$.asObservable(),this.destroySubject$=new r.ReplaySubject(1),this.destroy$=this.destroySubject$.asObservable(),t&&this.initState(t)}return t.prototype.ngOnDestroy=function(){this.stateSubject$.complete(),this.destroySubject$.next()},t.prototype.updater=function(t){var n=this;return function(o){var s,u=(r.isObservable(o)?o:r.of(o)).pipe(i.concatMap((function(t){return n.isInitialized?r.of(t).pipe(i.withLatestFrom(n.stateSubject$)):r.throwError(Error(n.constructor.name+" has not been initialized"))})),i.takeUntil(n.destroy$)).subscribe({next:function(r){var i=e.__read(r,2);n.stateSubject$.next(t(i[1],i[0]))},error:function(t){s=t,n.stateSubject$.error(t)}});if(s)throw s;return u}},t.prototype.initState=function(t){this.isInitialized=!0,this.stateSubject$.next(t)},t.prototype.setState=function(t){"function"!=typeof t?this.initState(t):this.updater(t)()},t}();t.ComponentStore=n,Object.defineProperty(t,"__esModule",{value:!0})}));