{"version":3,"file":"debounceSync.js","sourceRoot":"ng://@ngrx/component-store/","sources":["src/debounceSync.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAO,EACL,aAAa,EAEb,UAAU,EACV,YAAY,GACb,MAAM,MAAM,CAAC;;;;;AAEd,MAAM,UAAU,YAAY;IAC1B;;;;IAAO,UAAA,MAAM;QACX,OAAA,IAAI,UAAU;;;;QAAI,UAAA,QAAQ;;gBACpB,kBAA4C;;gBAC5C,WAA0B;;gBACxB,gBAAgB,GAAG,IAAI,YAAY,EAAE;YAC3C,gBAAgB,CAAC,GAAG,CAClB,MAAM,CAAC,SAAS,CAAC;gBACf,QAAQ;;;gBAAE;oBACR,IAAI,kBAAkB,EAAE;wBACtB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBAC5B;oBACD,QAAQ,CAAC,QAAQ,EAAE,CAAC;gBACtB,CAAC,CAAA;gBACD,KAAK;;;;gBAAE,UAAA,KAAK,IAAI,OAAA,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,EAArB,CAAqB,CAAA;gBACrC,IAAI;;;;gBAAE,UAAA,KAAK;oBACT,WAAW,GAAG,KAAK,CAAC;oBACpB,IAAI,CAAC,kBAAkB,EAAE;wBACvB,kBAAkB,GAAG,aAAa,CAAC,QAAQ;;;wBAAC;4BAC1C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;4BAC3B,kBAAkB,GAAG,SAAS,CAAC;wBACjC,CAAC,EAAC,CAAC;wBACH,gBAAgB,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;qBAC1C;gBACH,CAAC,CAAA;aACF,CAAC,CACH,CAAC;YACF,OAAO,gBAAgB,CAAC;QAC1B,CAAC,EAAC;IA1BF,CA0BE,EAAC;AACP,CAAC","sourcesContent":["/**\n * @license MIT License\n *\n * Copyright (c) 2017-2020 Nicholas Jamieson and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  asapScheduler,\n  MonoTypeOperatorFunction,\n  Observable,\n  Subscription,\n} from 'rxjs';\n\nexport function debounceSync<T>(): MonoTypeOperatorFunction<T> {\n  return source =>\n    new Observable<T>(observer => {\n      let actionSubscription: Subscription | undefined;\n      let actionValue: T | undefined;\n      const rootSubscription = new Subscription();\n      rootSubscription.add(\n        source.subscribe({\n          complete: () => {\n            if (actionSubscription) {\n              observer.next(actionValue);\n            }\n            observer.complete();\n          },\n          error: error => observer.error(error),\n          next: value => {\n            actionValue = value;\n            if (!actionSubscription) {\n              actionSubscription = asapScheduler.schedule(() => {\n                observer.next(actionValue);\n                actionSubscription = undefined;\n              });\n              rootSubscription.add(actionSubscription);\n            }\n          },\n        })\n      );\n      return rootSubscription;\n    });\n}\n"]}